---
title: "如何部署飞书机器人"
date: 2025-03-31
draft: false
tags: ["dify"]
---

# 部署飞书机器人

## 步骤概览
1. 配置Dify工作流
3. 配置飞书机器人
4. 配置LangBot，添加dify工作流，添加飞书机器人

```
Feishu Bot ---> LangBot ---> Dify 
```

## 配置Dify工作流

[如何部署dify](content/posts/如何部署dify.md)

## 配置飞书机器人

https://open.feishu.cn/app

## 配置LangBot

GitHub：https://github.com/RockChinQ/LangBot
Doc: https://docs.langbot.app/workshop/dify-service-api.html

### 部署

```bash
git clone https://github.com/RockChinQ/LangBot
cd LangBot
#启动docker
docker compose up
```

### 配置LangBot

#### 接入dify

在 LangBot 的 provider.json 文件中配置Dify.

```json
    "dify-service-api": {
        "base-url": "<你的dify服务地址>",
        "app-type": "chat",
        "options": {
            "convert-thinking-tips": "original"
        },
        "chat": {
            "api-key": "app-1234567890",
            "timeout": 120
        },
        "agent": {
            "api-key": "app-1234567890",
            "timeout": 120
        },
        "workflow": {
            "api-key": "app-1234567890",
            "output-key": "summary",
            "timeout": 120
        }
    }
```

#### 连接飞书机器人

```json
{
    "adapter": "lark",
    "enable": true,
    "app_id": "<你飞书的app_id>",
    "app_secret": "<你飞书的app_secret>",
    "bot_name": "<你飞书的机器人名称>",
    "enable-webhook": false,
    "port": 2285,
    "encrypt-key": "<你飞书的encrypt-key>"
},
```

注意：bot_name必须与创建机器人时填写的机器人名称相同。确保enable为true。

填写完成后启动 LangBot，若成功配置，日志中会出现[01-29 23:42:56.796] manager.py (68) - [INFO] : 初始化平台适配器 1: lark的字样，保持 LangBot 运行。





